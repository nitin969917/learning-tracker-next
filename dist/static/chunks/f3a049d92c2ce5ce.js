(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47255,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(22016),a=e.i(18566);function l(){let[e,l]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[i,u]=(0,r.useState)(""),[n,d]=(0,r.useState)(!1),h=(0,a.useSearchParams)(),m=(0,a.useRouter)(),[p,j]=(0,r.useState)({title:"",description:"",course_type:"Custom Subject",playlist_url:""});(0,r.useEffect)(()=>{x(),"true"===h.get("new")&&d(!0)},[h]);let x=async()=>{try{let e=await fetch("/api/courses");if(!e.ok)throw Error("Failed to fetch courses");let s=await e.json();l(s)}catch(e){u("Failed to load courses"),console.error(e)}finally{o(!1)}},N=async e=>{e.preventDefault();try{let e=await fetch("/api/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create course");j({title:"",description:"",course_type:"Custom Subject",playlist_url:""}),d(!1),x(),m.replace("/courses")}catch(e){u(e.message)}},y=async e=>{if(window.confirm("Are you sure you want to delete this course?"))try{let s=await fetch(`/api/courses/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete course")}x()}catch(e){u(e.message)}},f=e=>{if(!e)return"0h";let s=Math.floor(e),r=Math.floor((e-s)*60);return s>0&&r>0?`${s}h ${r}m`:s>0?`${s}h`:`${r}m`};return c?(0,s.jsx)("div",{className:"loading",children:"Loading courses..."}):(0,s.jsx)("div",{className:"courses-page",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{className:"page-title",children:"My Courses"}),(0,s.jsx)("button",{onClick:()=>d(!n),className:"btn btn-primary",children:n?"Cancel":"+ New Course"})]}),i&&(0,s.jsx)("div",{className:"error",children:i}),n&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{children:"Create New Course"}),(0,s.jsxs)("form",{onSubmit:N,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Course Title *"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:p.title,onChange:e=>j({...p,title:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-textarea",value:p.description,onChange:e=>j({...p,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Course Type"}),(0,s.jsxs)("select",{className:"form-select",value:p.course_type,onChange:e=>j({...p,course_type:e.target.value}),children:[(0,s.jsx)("option",{value:"Custom Subject",children:"Custom Subject"}),(0,s.jsx)("option",{value:"YouTube Playlist",children:"YouTube Playlist"})]})]}),"YouTube Playlist"===p.course_type&&(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"YouTube Playlist URL"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:p.playlist_url,onChange:e=>j({...p,playlist_url:e.target.value}),placeholder:"https://www.youtube.com/playlist?list=...",required:!0}),(0,s.jsx)("p",{className:"field-hint",children:"Paste the full playlist link. All videos will be auto-added as lectures (if the backend has a YouTube API key)."})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Course"})]})]}),0===e.length?(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("p",{className:"no-data",children:"No courses yet. Create your first course to get started!"})}):(0,s.jsx)("div",{className:"courses-grid",children:e.map(e=>(0,s.jsxs)("div",{className:"course-card",children:[(0,s.jsxs)("div",{className:"course-card-header",children:[(0,s.jsx)("h3",{children:e.title}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"btn-delete",title:"Delete course",children:"×"})]}),(0,s.jsx)("p",{className:"course-description",children:e.description||"No description"}),(0,s.jsxs)("div",{className:"course-meta",children:[(0,s.jsx)("span",{className:"course-type",children:e.course_type}),(0,s.jsxs)("span",{className:"course-lectures",children:[e.completed_lectures," / ",e.total_lectures," lectures"]})]}),e.total_hours>0&&(0,s.jsx)("div",{className:"course-hours-meta",children:(0,s.jsxs)("span",{className:"course-hours",children:["⏱️ ",f(e.total_hours)," total",e.completed_hours>0&&(0,s.jsxs)("span",{className:"completed-hours",children:[" • ",f(e.completed_hours)," completed"]})]})}),(0,s.jsxs)("div",{className:"course-progress-section",children:[(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress-fill",style:{width:`${e.completion_percentage}%`}})}),(0,s.jsxs)("span",{className:"progress-text",children:[e.completion_percentage,"% complete"]})]}),(0,s.jsx)(t.default,{href:`/courses/${e.id}`,className:"btn btn-primary btn-block",children:"View Course"})]},e.id))})]})})}e.s(["default",()=>l])}]);