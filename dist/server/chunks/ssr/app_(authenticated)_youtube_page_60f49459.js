module.exports=[62282,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)("library"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(null),B=(0,d.useRouter)();(0,c.useEffect)(()=>{C()},[]);let C=async()=>{try{let a=await fetch("/api/courses"),b=(await a.json()).filter(a=>"YouTube Playlist"===a.course_type||"string"==typeof a.description&&a.description.includes("YouTube")||"string"==typeof a.title&&a.title.includes("YouTube"));e(b)}catch(a){console.error(a),w("Failed to load resources")}finally{g(!1)}},D=async(a,b=null)=>{a&&a.preventDefault();let c=b||t;if(c){s(!0),w(""),y("");try{let a=await fetch("/api/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlist_url:c,title:"",course_type:"YouTube Playlist"})}),d=await a.json();if(!a.ok)throw Error(d.error||"Failed to import YouTube content");y(`Successfully imported: ${d.title}`),b||u(""),C(),setTimeout(()=>y(""),3e3)}catch(a){console.error(a),w(a.message)}finally{s(!1)}}},E=async a=>{if(a.preventDefault(),j.trim()){o(!0),q(""),m([]);try{let a=await fetch(`/api/youtube/search?q=${encodeURIComponent(j)}`);if(!a.ok)throw Error("Failed to search");let b=await a.json();m(b)}catch(a){console.error(a),q("Failed to search YouTube. Please try again.")}finally{o(!1)}}},F=a=>{r||D(null,"video"===a.type?`https://www.youtube.com/watch?v=${a.id}`:`https://www.youtube.com/playlist?list=${a.id}`)},G=a=>{A(a)},H=()=>{A(null)};return f?(0,b.jsx)("div",{className:"loading",children:"Loading..."}):(0,b.jsx)("div",{className:"youtube-page",children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsxs)("div",{className:"youtube-header",children:[(0,b.jsx)("h1",{children:"YouTube Resources"}),(0,b.jsx)("p",{children:"Browse, preview, and track YouTube learning content."})]}),(0,b.jsxs)("div",{className:"tab-nav",children:[(0,b.jsx)("button",{className:`tab-btn ${"library"===h?"active":""}`,onClick:()=>i("library"),children:"My Library"}),(0,b.jsx)("button",{className:`tab-btn ${"browse"===h?"active":""}`,onClick:()=>i("browse"),children:"Browse YouTube"})]}),v&&(0,b.jsx)("div",{className:"error-msg global-error",children:v}),x&&(0,b.jsx)("div",{className:"success-msg global-success",children:x}),"library"===h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"import-section",children:[(0,b.jsx)("h3",{children:"Quick Import"}),(0,b.jsxs)("form",{onSubmit:D,className:"import-form",children:[(0,b.jsx)("input",{type:"text",className:"form-input import-input",placeholder:"Paste YouTube Video or Playlist URL",value:t,onChange:a=>u(a.target.value)}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary import-btn",disabled:r||!t,children:r?"Importing...":"Import"})]})]}),(0,b.jsx)("div",{className:"resources-grid",children:a.length>0?a.map(a=>(0,b.jsxs)("div",{className:"resource-card",onClick:()=>B.push(`/courses/${a.id}`),children:[(0,b.jsxs)("div",{className:"resource-thumb",children:[(0,b.jsx)("img",{src:(a=>{if(a.playlist_url){let b=a.playlist_url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/);if(b)return`https://img.youtube.com/vi/${b[1]}/mqdefault.jpg`}return"https://www.iconpacks.net/icons/2/free-youtube-logo-icon-2431-thumb.png"})(a),alt:a.title,onError:a=>a.target.src="https://www.iconpacks.net/icons/2/free-youtube-logo-icon-2431-thumb.png"}),(0,b.jsx)("span",{className:"resource-type-badge",children:"YouTube Playlist"===a.course_type?"Playlist":"Video"})]}),(0,b.jsxs)("div",{className:"resource-info",children:[(0,b.jsx)("h3",{children:a.title}),(0,b.jsxs)("div",{className:"resource-stats",children:[(0,b.jsxs)("span",{children:[a.total_lectures," items"]}),(0,b.jsxs)("span",{children:[a.completion_percentage,"% complete"]})]}),(0,b.jsx)("div",{className:"progress-bar-sm",children:(0,b.jsx)("div",{className:"progress-fill-sm",style:{width:`${a.completion_percentage}%`}})})]})]},a.id)):(0,b.jsx)("div",{className:"no-resources",children:(0,b.jsx)("p",{children:"No YouTube resources imported yet."})})})]}),"browse"===h&&(0,b.jsxs)("div",{className:"browse-section",children:[(0,b.jsxs)("form",{onSubmit:E,className:"search-form",children:[(0,b.jsx)("input",{type:"text",className:"form-input search-input",placeholder:"Search for topics (e.g., 'React Hooks', 'Python for Beginners')...",value:j,onChange:a=>k(a.target.value)}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary search-btn",disabled:n,children:n?"Searching...":"Search"})]}),p&&(0,b.jsx)("div",{className:"error-msg",children:p}),(0,b.jsxs)("div",{className:"search-results-grid",children:[l.map(a=>(0,b.jsxs)("div",{className:"search-card",children:[(0,b.jsxs)("div",{className:"search-thumb",onClick:()=>G(a),children:[(0,b.jsx)("img",{src:a.thumbnail,alt:a.title}),(0,b.jsx)("span",{className:"resource-type-badge",children:a.type}),(0,b.jsx)("div",{className:"play-overlay",children:"▶"})]}),(0,b.jsxs)("div",{className:"search-info",children:[(0,b.jsx)("h3",{dangerouslySetInnerHTML:{__html:a.title}}),(0,b.jsx)("p",{className:"channel-name",children:a.channelTitle}),(0,b.jsxs)("div",{className:"search-actions",children:[(0,b.jsx)("button",{className:"btn btn-sm btn-secondary preview-btn",onClick:()=>G(a),children:"Preview"}),(0,b.jsx)("button",{className:"btn btn-sm btn-primary add-btn",onClick:()=>F(a),disabled:r,children:r?"Adding...":"+ Add"})]})]})]},a.id)),0===l.length&&!n&&j&&!p&&(0,b.jsx)("div",{className:"no-results",children:"No results found."})]})]}),z&&(0,b.jsx)("div",{className:"video-modal-overlay",onClick:H,children:(0,b.jsxs)("div",{className:"video-modal-content",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{className:"close-modal-btn",onClick:H,children:"×"}),(0,b.jsx)("div",{className:"video-frame",children:(0,b.jsx)("iframe",{src:"playlist"===z.type?`https://www.youtube.com/embed/videoseries?list=${z.id}&autoplay=1`:`https://www.youtube.com/embed/${z.id}?autoplay=1`,title:z.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,b.jsxs)("div",{className:"modal-footer",children:[(0,b.jsx)("h3",{children:z.title}),(0,b.jsx)("button",{className:"btn btn-primary add-btn-modal",onClick:()=>{F(z),H()},children:"+ Add to Library"})]})]})})]})})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_%28authenticated%29_youtube_page_60f49459.js.map